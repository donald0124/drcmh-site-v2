---
import { getEntry } from 'astro:content';
import { Stethoscope } from 'lucide-react';

// 1. å–å¾—è³‡æ–™
const settings = await getEntry('settings', 'global');
const { doctorWord, doctorName } = settings.data;

// 2. è™•ç†æ–‡å­—é‚è¼¯
// è¨­å®šé è¨­æ–‡å­— (è¬ä¸€å¾Œå°æ²’å¡«å¯«æ™‚é¡¯ç¤º)
const defaultText = `è¨±å¤šäººé²ç–‘åœ°èµ°é€²æ³Œå°¿ç§‘ï¼Œæ˜¯å› ç‚ºä¸å¥½æ„æ€ã€æ“”å¿ƒï¼Œæˆ–ä¸ç¢ºå®šé€™æ¨£çš„å•é¡Œæ˜¯å¦éœ€è¦å°±é†«ã€‚
å¤šå¹´åœ¨é†«å­¸ä¸­å¿ƒèˆ‡è‡¨åºŠç¬¬ä¸€ç·šçš„è¨“ç·´èˆ‡çœ‹è¨ºç¶“é©—ï¼Œè®“æˆ‘æ·±åˆ»é«”æœƒåˆ°ï¼Œæ³Œå°¿ç§‘çš„å›°æ“¾ä¸åªæ˜¯èº«é«”çš„ä¸é©ï¼Œæ›´å¸¸å½±éŸ¿ä¸€å€‹äººçš„è‡ªä¿¡ã€å°Šåš´èˆ‡ç”Ÿæ´»å“è³ªã€‚å› æ­¤ï¼Œæˆ‘é‡è¦–å‚¾è½èˆ‡æ¸…æ¥šèªªæ˜ï¼Œé™ªæ‚¨ä¸€èµ·æ‰¾å‡ºçœŸæ­£é©åˆæ‚¨çš„æ²»ç™‚æ–¹å¼ã€‚
å¸Œæœ›é€™è£¡ä¸åªæ˜¯ä¸€é–“çœ‹ç—…çš„è¨ºæ‰€ï¼Œè€Œæ˜¯ä¸€å€‹èƒ½è®“æ‚¨å®‰å¿ƒè«‡è«–ä»»ä½•é›£ä»¥å•Ÿé½’å•é¡Œçš„åœ°æ–¹ã€‚æˆ‘æœƒä»¥å°ˆæ¥­ç‚ºåŸºç¤ã€ä»¥ç†è§£ç‚ºå‡ºç™¼é»ï¼Œé™ªæ‚¨ä¸€èµ·å®ˆè­·ä¸‹åŠèº«çš„å¥åº·èˆ‡é•·é çš„ç”Ÿæ´»å“è³ªã€‚`;

// ä½¿ç”¨å¾Œå°è³‡æ–™ï¼Œå¦‚æœæ²’æœ‰å‰‡ä½¿ç”¨é è¨­å€¼
const rawText = doctorWord || defaultText;

// é—œéµæ­¥é©Ÿï¼šå°‡é•·æ–‡å­—ä¾ç…§ã€Œæ›è¡Œç¬¦è™Ÿã€åˆ‡åˆ†æˆé™£åˆ—ï¼Œä¸¦éæ¿¾æ‰ç©ºè¡Œ
const paragraphs = rawText.split('\n').filter(line => line.trim() !== '');
---

<section class="py-24 px-6 bg-white relative overflow-hidden">
  {/* èƒŒæ™¯è£é£¾ï¼šè¶…å¤§çš„æ·¡æ·¡æµ®æ°´å° */}
  <div class="absolute top-0 right-0 text-gray-50 opacity-[0.03] pointer-events-none">
     <Stethoscope size={600} strokeWidth={0.5} />
  </div>

  <div class="max-w-3xl mx-auto relative z-10">
    <div class="text-center mb-12">
        <h3 class="text-xs font-bold tracking-[0.2em] uppercase text-accent mb-3">Doctor's Note</h3>
        <h2 class="text-3xl md:text-4xl font-serif font-bold text-primary">é†«å¸«çš„è©±</h2>
        <div class="w-16 h-1 bg-accent mx-auto mt-6"></div>
    </div>

    {/* ä¿¡ä»¶å…§å®¹å€å¡Š */}
    <div class="relative">
        {/* å·¦å´é‚Šç·šè£é£¾ */}
        <div class="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-accent/0 via-accent/50 to-accent/0 md:block hidden"></div>

        <div class="pl-0 md:pl-10 text-lg md:text-xl text-text/80 leading-loose font-sans">
            
            {/* ğŸŸ¢ å‹•æ…‹æ¸²æŸ“æ®µè½ */}
            {paragraphs.map((paragraph, index) => {
                // è¨­è¨ˆé‚è¼¯ï¼šå¦‚æœæ˜¯ç¬¬ 2 æ®µ (index === 1)ï¼Œçµ¦å®ƒç‰¹æ®Šçš„å¼·èª¿æ¨£å¼
                const isHighlight = index === 1; 

                return (
                    <p class:list={[
                        "mb-8", // é è¨­é–“è·
                        { 
                          // å¦‚æœæ˜¯ç¬¬äºŒæ®µï¼Œå­—è®Šæ·±è‰²ã€åŠ ç²—ä¸€é»
                          "text-primary font-medium": isHighlight,
                          // å…¶ä»–æ®µè½ç¶­æŒåŸæœ¬æ¨£å¼
                          "": !isHighlight 
                        }
                    ]}>
                        {paragraph}
                    </p>
                )
            })}

        </div>
    </div>

    <div class="mt-16 flex justify-end items-center gap-4">
        <div class="w-12 h-0.5 bg-accent/40 rounded-full"></div>
        <div="text-right">
            <p class="font-serif text-2xl text-primary font-bold">å‘¨å­Ÿç¿° é†«å¸«</p>
            <p class="text-sm text-gray-400 mt-1">Dr. Chou Meng-Han</p>
        </div>
    </div>
  </div>
</section>